/*! wb-lib | https://github.com/emilymcaldwell/wb-lib/blob/main/LICENSE */
const t=(t,e,s)=>new MutationObserver((i=>{for(const n of i){const i=n.attributeName,o=n.target;"childList"===n.type?(n.removedNodes.forEach((t=>s(o,t))),n.addedNodes.forEach((t=>e(o,t)))):i&&t(o,i)}})),e=Object.assign,s=Object.freeze,i=Math.max,n=Math.min,o=clearTimeout,r=setTimeout,a=(t,s)=>t&&s?e(t.style,s):t?.style??null,l=t=>t+"px",h=t=>t?.classList??null,c=(t,e,s)=>h(t)?.toggle(e,s)??null,d=(t,e)=>c(t,e,!1)??null,u=(t,e)=>t?.getAttribute(e)??null,p=(t,e)=>{return u((s=`[${e}]`,t?.matches(s)?t:t?.closest(s)),e);var s},m=(t,e,s)=>e&&(s?t?.setAttribute(e,s):t?.removeAttribute(e)),f=(t,e,s,i)=>e.appendChild(t.createElement(s,i)),g=t=>t.parentElement??null,b=t=>t.nextElementSibling??null,E=(t,e)=>t.querySelector(e),x=(t,e)=>t.querySelectorAll(e),y=(t,e)=>t.matches(e),v=(t,e)=>[...y(t,e)?[t]:[],...x(t,e)],S=t=>[t,...x(t,"*")],L=t=>t?.ownerDocument,D=(t,e)=>t?.includes(e)??!1,C=(t,e,s)=>t?.addEventListener(e,s),M=(t,e,s)=>t?.removeEventListener(e,s),w=(t,e,s)=>e.forEach((e=>C(t,e,s))),H=(t,e,s)=>e.forEach((e=>M(t,e,s))),I=t=>t instanceof HTMLElement,T=t=>t instanceof HTMLAudioElement,O=t=>T(t)?t:null,k=t=>t instanceof MouseEvent,Q="target",R="indicator",V="source",W="margin",A="delay",N="loiter",z="simultaneous",$="click",j="mousedown",q="mousemove",F="mouseout",P="mouseover",U=s([P,F,j,$]);class X extends HTMLElement{static QN="tipps-visor";static QR=s([X]);#t;#e;#s=null;#i;#n;#o=()=>h(this.firstElementChild);constructor(){super();const t=this.attachShadow({mode:"closed"}),e=L(t),s=this.#t=f(e,t,"div");a(s,{position:"absolute",pointerEvents:"none",zIndex:"-1"}),this.#e=f(e,s,"slot")}get#r(){return u(this,R)??"active"}get#a(){return u(this,V)??"title"}get#l(){return+(u(this,W)??0)||4}get#h(){return+(u(this,A)??0)||700}get#c(){return+(u(this,N)??0)||300}static observedAttributes=s([Q,R,V,W,A,N]);attributeChangedCallback(t,e,s){if(t===R){const t=this.#o();t?.contains(e)&&(t.remove(e),t.add(s))}}handleEvent(t){k(t)&&(t.type===q&&this.#d(t),t.type===P?this.#u(t):D([F,j,$],t.type)&&this.onTippsDown(t))}#p(t=null){(E(this,"slot[name=prompt]")??this.#e).innerText=t??""}#d=t=>{const e=L(this.#s)?.defaultView;if(!e)return;const s=(o=this.#t,o?.getBoundingClientRect());var o;const r=new DOMRect(t.pageX,t.pageY,18,18),h=function(t,e){const s=2*e;return new DOMRect(t.scrollX+e,t.scrollY+e,t.innerWidth-s,t.innerHeight-s)}(e,this.#l),c=new DOMPoint(r.x,r.y-s.height),d=new DOMPoint(i(0,h.left-c.x)+n(0,h.right-(c.x+s.width)),i(0,h.top-c.y)+n(0,h.bottom-c.y));c.x+=d.x?d.x:r.width*(d.y/s.height),c.y+=d.y,c.x=n(c.x,h.right-s.width),c.y=n(c.y,h.bottom-s.height),a(this.#t,{left:l(c.x),top:l(c.y)})};#m(t,e){this.#i=void 0,this.#o()?.add(this.#r),this.#t.style.zIndex=e.style.zIndex??0;const s=p(e,this.#a);this.#p(s&&s.length?p(e,this.#a):e.innerText),this.#d(t),C(L(e),q,this)}#u(t){const e=t.target;I(e)&&(this.#s=e,this.#n?(this.#n=o(this.#n),this.#m(t,e)):this.#i=r((()=>this.#m(t,e)),this.#h))}#f(){this.#n=void 0,this.#p(),this.#t.style.zIndex="-1",this.#o()?.remove(this.#r)}onTippsDown(t){this.#i=o(this.#i),this.#n=o(this.#n),M(L(this.#s),q,this),!t||D([$,j],t.type)?this.#f():this.#n=r((()=>this.#f()),this.#c),this.#s=null}}const Y=X.observedAttributes;class B extends HTMLElement{static QN="tipps";static QR=s([...X.QR,B]);#g=new WeakSet;#b=new X;#E=t(((t,e)=>{t===this?e===Q?this.connectedCallback():D(Y,e)&&m(this.#b,e,u(this,e)):(this.#x(t),this.#y(t))}),((t,e)=>t===this&&this.children.length?this.#b.replaceChildren(...this.children):this.#y(e)),((t,e)=>this.#x(e)));#x(t){if(I(t))for(const e of S(t))I(e)&&this.#g.delete(e)&&H(e,U,this.#b)}#y(t){const e=u(this,Q);if(e&&I(t))for(const s of v(t,e))I(s)&&!this.#g.has(s)&&(this.#g.add(s),w(s,U,this.#b))}connectedCallback(){const t=g(this);t&&(Y.forEach((t=>m(this.#b,t,u(this,t)))),this.#b.onTippsDown(null),this.#x(t),this.#y(t),this.#E.disconnect(),this.#E.observe(t,{childList:!0,subtree:!0,attributeFilter:Y}),L(this).body.appendChild(this.#b).append(...this.children))}}const G=s(["play","pause","ended"]),J=s([Q,R,z]);class K extends HTMLElement{static QN="tmblr-audio";static QR=s([K]);#g=new WeakMap;get#r(){return u(this,R)??"playing"}get#v(){return!!u(this,z)}#E=t(((t,e)=>{t===this&&D(J,e)?this.connectedCallback():(this.#x(t),this.#y(t))}),((t,e)=>this.#y(e)),((t,e)=>this.#x(e)));#x(t){if(I(t))for(const e of S(t)){const t=this.#g.get(e);this.#g.delete(e)&&(M(e,j,this),H(e,G,this),d(e,this.#r),T(e)||a(g(e),{backgroundImage:t}))}}#y(t){const e=u(this,Q);if(e&&I(t))for(const s of v(t,e))if(I(s)&&!this.#g.has(s)){const t=g(s);t&&(C(s,j,this),c(s,this.#r,!(O(b(s))?.paused??1)),this.#g.set(s,a(t)?.backgroundImage??""),a(t,{backgroundImage:`url(${E(s,"img")?.src})`}))}}handleEvent(t){const e=t.target;if(k(t)&&I(e)){const t=b(e);if(T(t))if(this.#g.has(t)||(w(t,G,this),this.#g.set(t,"")),t.paused){if(!this.#v){const t=g(this);t&&v(t,"audio").forEach((t=>t.pause()))}t.play()}else t.pause()}else D(G,t.type)&&T(e)&&c(e.previousElementSibling??null,this.#r,!e.paused)}connectedCallback(){const t=g(this);t&&(this.#x(t),this.#y(t),this.#E.disconnect(),this.#E.observe(t,{childList:!0,subtree:!0,attributeFilter:J}))}}[...B.QR,...K.QR].forEach((t=>customElements.define(`wb-${t.QN}`,t)));

/*! wb-lib | https://github.com/emilymcaldwell/wb-lib/blob/main/LICENSE */
const t=Object.assign,e=Object.freeze,s=(e,s)=>t(e.style,s),i=(t,e)=>t.getAttribute(e),n=(t,e,s,i)=>e.appendChild(t.createElement(s,i)),o=t=>t?.getBoundingClientRect(),r=t=>t?.ownerDocument;class a extends HTMLElement{static QN="tipps-visor";static QR=e([a]);Pursue=!0;Margin=4;#t;#e;#s="";#i=null;#n;#o;#r=()=>this.firstElementChild?.classList??null;constructor(){super();const t=this.attachShadow({mode:"closed"}),e=r(t),i=this.#t=n(e,t,"div");s(i,{position:"absolute",pointerEvents:"none"}),this.#a(0,0),this.#e=n(e,i,"slot")}setIdr(t){const e=this.#r();e?.contains(this.#s)&&(e.remove(this.#s),e.add(t)),this.#s=t}#h(t=null){(this.querySelector("slot[name=prompt]")??this.#e).innerText=t??""}#a(t,e){s(this.#t,{left:t+"px",top:e+"px"})}#l=t=>{const e=r(this.#i)?.defaultView;if(!e)return;const s=o(this.#t),i=new DOMRect(t.pageX,t.pageY,18,18),n=function(t,e){const s=2*e;return new DOMRect(t.scrollX+e,t.scrollY+e,t.innerWidth-s,t.innerHeight-s)}(e,this.Margin),a=new DOMPoint(i.x,i.y-s.height),h=new DOMPoint(Math.max(0,n.left-a.x)+Math.min(0,n.right-(a.x+s.width)),Math.max(0,n.top-a.y)+Math.min(0,n.bottom-a.y));a.x+=h.x?h.x:i.width*(h.y/s.height),a.y+=h.y,a.x=Math.min(a.x,n.right-s.width),a.y=Math.min(a.y,n.bottom-s.height),this.#a(a.x,a.y)};#c(t,e,s){if(this.#n=void 0,this.#r()?.add(this.#s),this.#t.style.zIndex=s.style.zIndex??0,this.#h(i(s,t.Source)),this.Pursue)this.#l(e),r(s).addEventListener("mousemove",this.#l);else{const t=o(s);this.#a(t.right-this.Margin,t.bottom-this.Margin)}}onTippsUp(t,e){const s=e.target;s instanceof HTMLElement&&(this.#o?(this.#o=clearTimeout(this.#o),this.#c(t,e,this.#i=s)):(this.#i=s,this.#n=setTimeout((()=>this.#c(t,e,s)),t.Delay)))}#d(){this.#o=void 0,this.#h(),this.#t.style.zIndex="-1",this.#r()?.remove(this.#s)}onTippsDown(t,e){this.#n=clearTimeout(this.#n),this.#o=clearTimeout(this.#o),r(this.#i)?.removeEventListener("mousemove",this.#l),"click"===e.type||"mousedown"===e.type?this.#d():this.#o=setTimeout((()=>this.#d()),t.Loiter),this.#i=null}}const h="target",l="indicator",c="source",d="pursue",u="margin",p="delay",m="loiter";class E extends HTMLElement{static QN="tipps";static QR=e([...a.QR,E]);static observedAttributes=e([h,l,c,d,u,p,m]);#u=new a;#p=new MutationObserver((t=>{const e=this.#m;for(const s of t){if(s.target===this)return;"childList"===s.type?(s.removedNodes.forEach((t=>this.#E(t,e,1))),s.addedNodes.forEach((t=>this.#E(t,e)))):"attributes"===s.type&&(this.#E(s.target,e,1),this.#E(s.target,e))}}));#g=t=>this.#u.onTippsUp(this,t);#v=t=>this.#u.onTippsDown(this,t);#E(t,e,s=0){if(t instanceof HTMLElement&&t.matches(e)){const e=(s?t.removeEventListener:t.addEventListener).bind(t);e("mouseover",this.#g),["mouseout","mousedown","click"].forEach((t=>e(t,this.#v)))}}get#m(){return i(this,h)??"[title]"}get#s(){return i(this,l)??"active"}get Source(){return i(this,c)??"title"}get#b(){if(!this.hasAttribute(d))return!1;const t=i(this,d);return!t||!/^\s*(false|0|off)\s*$/i.test(t)}get#y(){return Number(i(this,u)??4)}get Delay(){return Number(i(this,p)??700)}get Loiter(){return Number(i(this,m)??300)}connectedCallback(){const t=this.parentNode;if(t){const s=this.#m;for(const i of(e=s,t.querySelectorAll(e)))this.#E(i,s,1),this.#E(i,s);this.#p.disconnect(),this.#p.observe(t,{childList:!0,subtree:!0,attributeFilter:E.observedAttributes}),r(this).body.appendChild(this.#u).append(...this.children),this.#u.Pursue=this.#b,this.#u.setIdr(this.#s)}var e}attributeChangedCallback(t,e,s){switch(t){case h:this.connectedCallback();break;case d:this.#u.Pursue=this.#b;break;case l:this.#u.setIdr(this.#s);break;case u:this.#u.Margin=this.#y}}}[...E.QR].forEach((t=>customElements.define(`wb-${t.QN}`,t)));
